<div *ngIf="selectedCharacter" class="stories">
  <div>
    <h2>{{selectedCharacter.fullName}}</h2>
  </div>
  <div class="stories-box">
    <div class="stories-box--new-story">
      <button mat-raised-button (click)="showNewStoryForm()" *ngIf="!isStoryFormShown">+ Nowa historia</button>
      <form *ngIf="isStoryFormShown" class="story-form" [formGroup]="newStoryForm">
        <mat-form-field class="story-form__input">
          <mat-label>Tytuł</mat-label>
          <input matInput required placeholder="Tytuł do historii" spellcheck="false" value="Np. dzieciństwo"
            formControlName="title">
        </mat-form-field>

        <mat-form-field class="story-form__input">
          <mat-label>Opis</mat-label>
          <textarea matInput required placeholder="Historia postaci" spellcheck="false"
            formControlName="desc"></textarea>
        </mat-form-field>

        <button mat-raised-button (click)="createNewStory()" [disabled]='newStoryForm.invalid'>+ Dodaj</button>

      </form>
    </div>


    <div *ngIf="stories.length > 0" class="boundary" cdkDropList (cdkDropListDropped)="drop($event)">

      <div *ngFor="let story of stories; index as i" class="box" cdkDragBoundary=".boundary" cdkDrag>
        <div class="buttons-box">
          <button mat-mini-fab (click)="insertDeleteInfo()" (dblclick)="deleteStory(story.id)">
            <app-icon [icon]="'x'" [color]="'#1D1D1D'" [size]="0.6"></app-icon>
          </button>

          <button mat-mini-fab (click)="openEditModal(story.title, story.story, story.id)">
            <app-icon [icon]="'edit'" [color]="'#1D1D1D'" [size]="0.6"></app-icon>
          </button>
        </div>
        <div class="story-box">
          <span class="story-box__title" #title>{{story.title}}</span>
          <span class="story-box__desc" #story>{{story.story}}</span>
        </div>
      </div>
    </div>
    <div *ngIf="stories.length === 0">
      Brak.
    </div>
  </div>
</div>

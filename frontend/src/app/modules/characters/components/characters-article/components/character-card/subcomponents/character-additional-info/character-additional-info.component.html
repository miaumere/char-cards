<div class="card">
    <div class="card-info nationality" *ngIf="flag || isUserLogged">
        <span class="info__desc">
            ðŸš© {{ 'CHARACTER_CARD.NATIONALITY' | translate }}
        </span>
        <form class="edit-country" [formGroup]="form">
            <div class="icons-options">
                <app-edit-icon
                    (clickedEvent)="setEditedKey('nationality')"
                    *ngIf="editedKey !== 'nationality' && isUserLogged"
                ></app-edit-icon>

                <ng-container
                    *ngIf="editedKey === 'nationality' && isUserLogged"
                >
                    <mat-icon
                        class="option-icon option-icon--cancel"
                        (click)="setEditedKey(null)"
                        >cancel</mat-icon
                    >

                    <mat-icon
                        class="option-icon option-icon--save"
                        (click)="saveEvent.emit()"
                        >save</mat-icon
                    >
                </ng-container>
            </div>

            <ng-container *ngIf="editedKey !== 'nationality'">
                <div *ngIf="flag" [title]="flag.name.common">
                    <img [src]="flag?.flags.svg | sanitizer" class="flag" />
                </div>
                <div *ngIf="!flag">?</div>
            </ng-container>

            <mat-form-field
                *ngIf="editedKey === 'nationality'"
                class="edit-nationality"
            >
                <mat-label>
                    {{ 'CHARACTER_MODIFY.NATIONALITY' | translate }}</mat-label
                >

                <mat-select formControlName="nationality">
                    <mat-option [value]="null">---</mat-option>
                    <mat-option
                        *ngFor="let country of countries"
                        [value]="country.cca2"
                    >
                        <img
                            [src]="country.flags?.svg"
                            class="flag flag--in-list"
                        />
                        {{ country.name.common }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </form>
    </div>

    <div class="card-info" *ngIf="character?.birthday || isUserLogged">
        <span class="info__desc">
            ðŸŽ‚ {{ 'CHARACTER_CARD.BIRTHDAY' | translate }}
        </span>
        <span class="info__data"
            >{{ character?.birthday | date: 'dd/MM/yyyy' }}
        </span>
    </div>

    <ng-container *ngIf="character?.death">
        <div style="margin-top: 0.5rem">
            <span class="info__desc">
                ðŸ’€ {{ 'CHARACTER_CARD.DEATH' | translate }}
            </span>
            <span class="info__data info__data--death">
                {{ character?.death | date: 'dd/MM/yyyy' }}
                <span *ngIf="character?.deathReason">
                    ({{ character?.deathReason }})
                </span>
            </span>
        </div>
    </ng-container>

    <div class="card-info" *ngIf="character?.occupation">
        <span class="info__desc">
            ðŸ’¼ {{ 'CHARACTER_CARD.PROFESSION' | translate }}
        </span>
        <span class="info__data">{{ character?.occupation }}</span>
    </div>

    <app-temperament-bars
        *ngIf="hasTemperamentInfo || isUserLogged"
        [temperaments]="character?.temperament"
        [isUserLogged]="isUserLogged"
        [form]="form"
        (saveEvent)="saveEvent.emit()"
    >
    </app-temperament-bars>
    <ng-container *ngIf="character?.colors || isUserLogged">
        <app-colors
            [isUserLogged]="isUserLogged"
            [colors]="character?.colors"
            [form]="form"
            (saveEvent)="saveEvent.emit()"
        >
        </app-colors>
    </ng-container>

    <div>
        <app-divider></app-divider>
        <app-tags></app-tags>
    </div>
</div>

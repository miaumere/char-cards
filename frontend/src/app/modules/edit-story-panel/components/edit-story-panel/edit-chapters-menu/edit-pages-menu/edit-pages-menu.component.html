<mat-tab-group>
  <mat-tab label="Edycja stron">

    <div class="new-pages">
      <div>
        <button (click)="fileInput.click()" mat-stroked-button [ngStyle]="{'background': bookColor}">
          <mat-icon> attach_file</mat-icon>

          Wybrano: {{filesListNumber}} plików.
          <input #fileInput type="file" (change)="onFileInput($event.target.files)" style="display:none;" multiple />
        </button>

      </div>

      <button mat-stroked-button [ngStyle]="{'background': bookColor}" [disabled]="filesListNumber === 0"
        style="margin: 1rem;" (click)="addNewPages()">
        <mat-icon>library_add</mat-icon>
        Dodaj nowe strony
      </button>

    </div>


    <div class="edit-pages" *ngIf="pagesNumber.length > 0" class="boundary" cdkDropList
      (cdkDropListDropped)="drop($event)">

      <mat-card *ngFor="let pageId of pagesNumber; index as i;" class="page-card" [ngStyle]="{'background': bookColor}"
        cdkDragBoundary=".boundary" cdkDrag>
        <mat-card-header>
          <mat-card-title>
            <span style="font-size: xx-large;">
              {{+i + 1}}.
            </span>
          </mat-card-title>

        </mat-card-header>
        <img src="{{pageURL}}/{{chapterId}}/{{i}}" class="image" />
        <mat-card-actions>
          <button mat-mini-fab color="warn" (click)="insertDeleteInfo()" (dblclick)="deletePage(pageId)">
            <mat-icon>delete</mat-icon>
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
    <div class="edit-pages" *ngIf="pagesNumber.length === 0">
      Brak stron dla tej części.
    </div>
  </mat-tab>

  <mat-tab label="Edycja postaci występujących">
    <div class="edit-existing-characters">
      <form [formGroup]="charactersInChapterForm">
        <mat-form-field class="edit-existing-characters__form-field">
          <mat-label>Dodaj postać, która występuje w części:</mat-label>
          <input matInput placeholder="Imię postaci" formControlName="character" required [matAutocomplete]="auto">
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let char of filteredCharacters | async" [value]="char.fullName">
              <img *ngIf="char.profilePic"
                [src]="'data:image/' + char.profilePic?.extension + ';base64, ' + char.profilePic?.image | sanitizer"
                class="option__image">
              <span>{{char.fullName}}</span>
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>

      </form>

      <div>
        <span>Obecne występujące postacie:</span>
      </div>

    </div>

  </mat-tab>

</mat-tab-group>
